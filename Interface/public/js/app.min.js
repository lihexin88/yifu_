App={isString:function(a){return"[object String]"==Object.prototype.toString.apply(a)},isFunction:function(a){return"[object Function]"==Object.prototype.toString.apply(a)},isArray:function(a){return"[object Array]"==Object.prototype.toString.apply(a)},isNumber:function(a){return"[object Number]"==Object.prototype.toString.apply(a)},isRegExp:function(a){return"[object RegExp]"==Object.prototype.toString.apply(a)},isObject:function(a){return"[object Object]"==Object.prototype.toString.apply(a)},isString:function(a){return"[object String]"==
Object.prototype.toString.apply(a)},format:function(a,c){if(1==arguments.length)return function(){var b=$.makeArray(arguments);b.unshift(a);return $.format.apply(this,b)};2<arguments.length&&c.constructor!=Array&&(c=$.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);$.each(c,function(b,c){a=a.replace(RegExp("\\{"+b+"\\}","g"),c)});return a},numberKeypress:function(a){a=a.keyCode||a.which;return 48<=a&&57>=a||8==a?!0:!1},tip:function(a,c){"undefined"==typeof c&&(c="success");$("body").toastmessage("showToast",
{text:a,sticky:!1,position:"top-right",type:c})},serializeParam:function(a){var c=[],b;for(b in a)if(!("method"==b||"timeout"==b||"async"==b))if("function"==(typeof a[b]).toLowerCase()||"object"==(typeof a[b]).toLowerCase()){if(utils.isArray(a[b]))for(var d=0;d<a[b].length;d++)c.push(encodeURIComponent(b)+"[]="+encodeURIComponent(a[b][d]))}else c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c.join("&")},formatUrl:function(a){a=a.replace(/&&/g,"&");a=a.replace(/\?&/g,"?");a=a.replace(/&$/g,
"");a=a.replace(/&#/g,"#");return a=a.replace(/&+/g,"&")}};
App.browser=function(){var a=navigator.userAgent.toLowerCase(),c=window.opera,b={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(a),opera:!!c&&c.version,webkit:-1<a.indexOf(" applewebkit/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode};b.gecko="Gecko"==navigator.product&&!b.webkit&&!b.opera&&!b.ie;var d=0;if(b.ie){var d=a.match(/(?:msie\s([\w.]+))/),e=a.match(/(?:trident.*rv:([\w.]+))/),d=d&&e&&d[1]&&e[1]?Math.max(1*d[1],1*e[1]):d&&d[1]?1*d[1]:e&&e[1]?1*e[1]:0;b.ie11Compat=11==document.documentMode;
b.ie9Compat=9==document.documentMode;b.ie8=!!document.documentMode;b.ie8Compat=8==document.documentMode;b.ie7Compat=7==d&&!document.documentMode||7==document.documentMode;b.ie6Compat=7>d||b.quirks;b.ie9above=8<d;b.ie9below=9>d;b.ie11above=10<d;b.ie11below=11>d}if(b.gecko&&(e=a.match(/rv:([\d\.]+)/)))e=e[1].split("."),d=1E4*e[0]+100*(e[1]||0)+1*(e[2]||0);/chrome\/(\d+\.\d)/i.test(a)&&(b.chrome=+RegExp.$1);/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&(b.safari=+(RegExp.$1||
RegExp.$2));b.opera&&(d=parseFloat(c.version()));b.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]));b.version=d;b.isCompatible=!b.mobile&&(b.ie&&6<=d||b.gecko&&10801<=d||b.opera&&9.5<=d||b.air&&1<=d||b.webkit&&522<=d||!1);return b}();function getParamVal(a,c){var b=a.match(RegExp("(^|&|\\?)"+(c||"page")+"=([^&]*)(&|$)"));return null!=b?decodeURI(b[2]):null}function refreshCaptcha(a){"undefined"==typeof a&&(a="captcha_src");$("#"+a).attr("src",$("#"+a).data("src")+"?id="+Math.random())}
function getJavaScript(a){var c,b;b=[];for(var d=/<script[^>]*>([\s\S]*?)<\/script>/gi;c=d.exec(a);)b.push(c[1]);return b}function evalJavaScript(a){(a=a.join("\n"))&&(window.execScript?window.execScript(a):window.setTimeout(a,0));return!0}function evalJScript(a){a=getJavaScript(a);return evalJavaScript(a)}
App.sendRequest=function(a,c,b,d,e){var f={mask:!0,maskSelector:"",addClass:"loading-indicator"};e&&jQuery.extend(f,e);var g=null;f.mask&&""!=f.maskSelector?g=f.maskSelector instanceof jQuery?f.maskSelector:jQuery(f.maskSelector):f.mask&&b instanceof jQuery&&(g=b);var h="html",h="json"==c?"json":"html"==c?"html":"script"==c?"script":"xml"==c?"xml":"text"==c?"text":"";c={};c=b instanceof jQuery?b.serialize():b;jQuery.ajax({type:"POST",url:a,data:c,dataType:h,beforeSend:function(){null!=g&&g.showLoading(f)},
success:function(a){if("json"==h&&-1==a.code)return location.href=a.url,!1;d(a)},complete:function(){null!=g&&g.hideLoading()}})};App.getJSON=function(a,c,b,d){App.sendRequest(a,"json",c,b,d)};App.getHTML=function(a,c,b,d){App.sendRequest(a,"html",c,b,d)};App.getText=function(a,c,b,d){App.sendRequest(a,"text",c,b,d)};App.getXML=function(a,c,b,d){App.sendRequest(a,"xml",c,b,d)};
App.importScript=function(a){document.body?App.loadScript(Remote.SiteURL+a):document.write('<script type="text/javascript" src="'+a+'">\x3c/script>')};App.importCSS=function(a){document.body?App.loadCSS(a):document.write('<link rel="stylesheet" type="text/css" href="'+a+'" />')};App.loadScript=function(a){var c=document.createElement("SCRIPT");c.type="text/javascript";c.src=a;c.defer=!0;document.getElementsByTagName("HEAD")[0].appendChild(c)};
App.loadCSS=function(a){if(isGecko){var c=document.createElement("LINK");c.rel="stylesheet";c.type="text/css";c.href=a;document.getElementsByTagName("HEAD")[0].appendChild(c)}else document.createStyleSheet(a)};App.dataGrid=function(a,c,b,d){var e={maskSelector:"#"+a,addClass:""};d&&jQuery.extend(e,d);App.sendRequest(c,"",b,function(b){jQuery("#"+a).html(b);evalJScript(b);if(d&&d.func)try{d.func(b)}catch(c){alert(c.message)}},e)};
